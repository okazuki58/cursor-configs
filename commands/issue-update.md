# Issue検証・補強（/issue:update）

GitHub Issue が実装可能な精度に達しているかを検証し、不足点や曖昧さを明確化するコマンドです。

## 目的

既存の GitHub Issue が実装可能な精度に達しているかを検証し、不足点や曖昧さを明確化する。

## 引数

- `issue_url` (省略可): 対象の GitHub Issue URL または番号
  - URL形式: `https://github.com/owner/repo/issues/123`
  - 番号のみ: `123`
  - **省略した場合**: AI がユーザーに対象 Issue URL を質問します

## 振る舞い

### Issue URL が指定されていない場合

1. 「どの Issue を検証しますか？Issue URL または番号を教えてください」とユーザーに質問

### Issue URL が指定されている場合

1. URL から Issue 番号を抽出する（URL形式の場合）
2. `gh issue view {番号} --json title,body,comments` で Issue の全内容を取得
3. Issue 本文を全文確認する
4. 曖昧・不足・矛盾している点を列挙する
5. 実装に必要だが記載されていない情報を指摘する
6. タスク粒度が粗い場合は分解案を提示する

## 出力ルール

- **コードを書かない**
- **Issue 本文を直接書き換える**
- 技術選定や実装方針の提案もしない（仕様の不足を指摘するのみ）

## 出力フォーマット

```markdown
## Issue 検証結果

### 実装可能性: {高 / 中 / 低}

### 明確な点
- {既に十分に定義されている項目}

### 曖昧な点
- {解釈が複数ありうる記述}
- {具体性が不足している要件}

### 不足している情報
- {実装に必要だが記載されていない項目}
- {エッジケースの扱い}
- {エラーハンドリングの方針}

### 矛盾している点
- {記述間で矛盾がある項目}

### タスク分解案（必要に応じて）
- [ ] {大きなタスクを分割した単位}
- [ ] {各タスクは独立して完了可能}

### 推奨事項
- {Issue 本文に追記すべき内容の提案}
```

## 役割

- `/issue:create` 直後の安全装置
- 仕様変更時の影響確認手段
- `/issue:run` 実行前の最終検証

## 使用例

```
# Issue URL を指定して検証
/issue:update https://github.com/owner/repo/issues/123

# Issue 番号のみでも可
/issue:update 123

# 省略（AI が質問する）
/issue:update
```

## 前提条件

- GitHub CLI (`gh`) がインストールされ、認証済みであること
- 現在のディレクトリが Git リポジトリであること
- リポジトリに対して Issue 閲覧権限があること

## 制約（重要）

- コード生成は一切しない
- 実装方針の提案もしない（仕様の検証のみ）

## 次のステップ

検証で問題がなければ `/issue:run {番号}` で実装を開始できます。
不足・矛盾が見つかった場合は、Issue 本文を人が修正してから実装に進みます。