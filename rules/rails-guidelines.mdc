---
description: "Rails 開発のベストプラクティス"
globs: ["app/**/*.rb", "config/**/*.rb"]
alwaysApply: true
---

# Rails ガイドライン

## コントローラ
- アクションを肥大化させない。ロジックはサービスオブジェクトやモデルスコープに切り出す。
- Strong Parameters を利用して入力値を制御する。
- 共通処理は before_action でまとめる。

## モデル
- ビジネスロジックはモデルまたはサービスに集約する。
- スコープを積極的に利用し、検索条件をコントローラに書かない。
- バリデーションや関連付けを整理し、責務を明確化する。

## ビュー
- ビューは表示専用に徹し、ロジックは避ける。
- 複雑な処理はヘルパーやデコレーターに移す。
- 部分テンプレートを活用して重複を減らす。

## マイグレーション
- `change` メソッドを基本とし、ロールバック可能にする。
- 必要なカラムには必ずインデックスを付与する。

## テスト
- RSpec を利用し、モデル・サービス・リクエスト単位でテストを書く。
- テストは仕様のドキュメントになるように意図を明確にする。
